
import ccm      
log=ccm.log()   

from ccm.lib.actr import *  

#####
# Python ACT-R requires an environment
# but in this case we will not be using anything in the environment
# so we 'pass' on putting things in there

class MyEnvironment(ccm.Model):
    pass

#####
# create an act-r agent


class MyAgent(ACTR):
    focus=Buffer()
    DMbuffer=Buffer()                           # create a buffer for the declarative memory (henceforth DM)
    DM=Memory(DMbuffer)                         # create DM and connect it to its buffer    
    DM.add('extra:tomatoes')              # put a chunk into DM
    focus.set('sandwich bread')
        
    def bread_bottom(focus='sandwich bread'):   
        print "I have a piece of bread"         
        focus.set('sandwich cheese')    

    def cheese(focus='sandwich cheese'):        
        print "I have put cheese on the bread"  
        focus.set('sandwich ham')

    def ham(focus='sandwich ham'):
        print "I have put  ham on the cheese"
        focus.set('get_extra')

    def extra(focus='get_extra'):
        print "recalling the order"
        DM.request('extra:?')                # retrieve a chunk from DM into the DM buffer
        focus.set('sandwich extra')         # ? means that slot can match any content

    def order(focus='sandwich extra', DMbuffer='extra:?extra'):  # match to DMbuffer as well
        print "I recall they wanted......."                                 # put slot 2 value in ?condiment
        print extra             
        print "i have put the extra tomatoes on the sandwich"
        focus.set('sandwich bread_top')

    def bread_top(focus='sandwich bread_top'):
        print "I have put bread on the ham"
        print "I have made a ham and cheese sandwich"
        focus.set('stop')   

    def stop_production(focus='stop'):
        self.stop()
